<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="U'TF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calcul de la posició d'un robot</title>
<script type="text/javascript" async
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js">
</script>
<style>
body {
font-family: Arial, sans-serif;
margin: 20px;
}
.equation {
margin: 20px 0;
}
.results {
font-weight: bold;
}
/* Oculta els elements de sortida per defecte */
#output,#robotCanvas{
display: none;
}
canvas{
border: lpx solid black;
}
</style>
</head>
<body> <h1>Calcul de la posició d'un robot amb dos braços</h1
<div>
<label for="al">Longitud del primer braç (a,):</label>
<input type="number" id="a1" value="1" step="0.1"><br><br>
<label for="a2">Longitud del segon braç(az):</label>
<input type="number" id="a2"value="0.5" step="0.1"><br><br>
<label for="q1">Angle del primer braç (q1, en graus):</label>
<input type="number" id="q1" value="45" step="O.1"><br><br>
<label for="q2">Angle del segon braç (q2, en graus):</label>
<input type="number" id="q2" value="30"step='0.1"><br><br>
<button onclick="calculatePosition()">Calcula la posició</button>
</div>
<div id="output"></div>
<canvas id="robotCanvas" width="400" height="400"></canvas>
<script>
function calculatePosition(){
// Agafar les dades introduides per l'usuari
let al = parseFloat(document.getElementById('a1').value);
let a2 = parseFloat(document.getElementById('a2').value);


let q1_deg= parseFloat(document.getElementById('q1').value);// Grados
let q2_deg =parseFloat(document.getElementById('q2').value);// Grados
let q1 = q1_deg *Math.PI/ 180;// Convertir graus a radians
let q2= q2_deg* Math.PI/ 180; // Convertir graus a radians
/1 **Mostrar els contenidors de sortida**
document.getElementById('output').style.display ='block';
document.getElementById(robotCanvas').style.display ='block';
// Fase 1: Fórmules
let output ="<div class='equation'>Les equacions per calcular la posició final del robot
són:</div>";
output +="<div class='equation'>\[x= a_1\\cos(q_1)+ a_2\\cos(q_1+q_2)W]</div>";
output +="<div class='equation'>\[ y = a_1 \sin(q_1)+ a_2 \sin(q_1 + q_2)W]</div>";
// Fase 2: Substituir les variables
output +="<div class='equation'>Substituint els valors:</div>";
output +=`<div class='equation'>\[x=${al}\lcos(${q1_deg}°)+ ${a2}\cos(${q1_deg}o
+${q2_deg}°)\\]</div>`;
output +=div class='equation'>\y =${al}lsin(${q1_deg}°)+${a2} lsin(S{q1_deg}o
+${q2_deg}°)\\]</div>`;
// Fase 3: Càlcul numèric detallat
let x1 = a1*Math.cos(q1);
let x2= a2*Math.cos(q1 + q2);
let y1 = a1 *Math.sin(q1);
let y2 = a2 * Math.sin(q1 + q2);
output +="<div class='equation'>Desglossant els calculs:</div>";
output +=`<div class='equation'>\[x_1=a_1\lcos(q_1)=${a1} lltimes \\cos(${q1_deg}o)
=${x1.toFixed(2)}\]</div>`;
output +=`<div class='equation'>\[x_2=a_2\lcos(q_1+q_2)=${a2}\ltimes \\cos($
{q1_deg}°+ ${q2_deg}°)= ${x2.toFixed(2)}\]</div>`;
output +=`<div class=-'equation'>\ y_1 = a_1 \lsin(q_1)=${a1}\ltimes \lsin(${q1_deg}°)
=${y1.toFixed(2)}\]</div>`;
output +=`<div class--'equation'>\y_2= a_2llsin(q_1 +q_2)=${a2}\ltimes \sin($
{q1_deg}°+${q2_deg}°)=${y2.toFixed(2)}\]</div>`;
// Resultat final
let x=x1+ x2;
lety=y1 +y2;
output +="<div class='equation'>Calculant els resultats numerics totals:</div>";
output +=`<div class='equation'>\[x=${x.toFixed(2)}\\]</div>`;
output +=`<div class='equation'>\[y=${y.toFixed(2)}\]</div>`;
// Mostrar el resultat
document.getElementById('output').innerHTML = output;
MathJax.typesetO);// Renderitzar MathJax per mostrar les fórmules correctament
// Fase 4: Part gràfica
let canvas = document.getElementById(robotCanvas');
let ctx = canvas.getContext('2d');


ctx.clearRect(0, 0, canvas.width, canvas.height);// Netejar canvas
// Centre i escales
let centerX= canvas.width / 2;
let centerY= canvas.height / 2;
let scale = 80;
// Coordenades
let x1_screen = centerX + x1 * scale;
let y1_screen = centerY -y1 * scale;
let x2_screen = centerX + x* scale;
let y2_screen = centerY -y * scale;
// Dibuixar braç 1
ctx.beginPathO);
ctx.moveTo(centerX,centerY);
ctx.lineTo(x1_screen, y1_screen);
ctx.strokeStyle ='blue';
ctx.lineWidth = 5;
ctx.strokeO;
// Dibuixar braç 2
ctx.beginPathO);
ctx.moveTo(x1_screen, y1_screen);
ctx.lineTo(x2_screen, y2_screen);
ctx.strokeStyle ='green';
ctx.lineWidth = 5;
ctx.strokeO);
// Dibuixar els cercles als extrems
ctx.beginPathO);
ctx.arc(cenerx, ceterY, , , 2Math.; B de brag
ctx.fillStyle='red';
ctx.fillO);
ctx.beginPathO);
ctx.arc(x1_screen,y1_screen, 5,0, 2*Math.PI);// Final del primer brag
ctx.fillStyle ='red';
ctx.fillO);
ctx.beginPathO);
ctx.arc(x2_screen, y2_screen, 5, 0, 2* Math.PI); // Final del segon braç
ctx.fillStyle ='red';
ctx.fillo);
}
</script>
</body>
</html>
